---
kind: pipeline
name: amd64

platform:
  os: linux
  arch: amd64

workspace:
  base: /go
  path: src/code.gitea.io/gitea

steps:
- name: build
  image: golang:1.12
  pull: true
  environment:
    TAGS: bindata sqlite sqlite_unlock_notify
  commands:
    - make clean
    - make generate
    - make vet
    - make lint
    - make fmt-check
    - make swagger-check
    - make swagger-validate
    - make misspell-check
    - make test-vendor
    - make build
  when:
    event: [ push, tag, pull_request ]
